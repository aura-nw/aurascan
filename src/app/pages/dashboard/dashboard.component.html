<!-- Chart -->
<section>
  <div class="row">
    <div class="col-xl-12">
      <div class="card card-h-100">
        <div class="card-body">
          <div class="align-items-center mb-3">
            <div class="d-flex flex-wrap align-items-center mb-lg-6">
              <h5 class="sub-text sub-text-mob text--white">Transactions</h5>
              <div class="ms-auto">
                <div class="d-none d-lg-block">
                  <button
                    type="button"
                    class="button button-primary body-small mr-2"
                    [class.active]="chartRange === chartRangeData.M_60"
                    (click)="updateBlockAndTxs(chartRangeData.M_60)">
                    60m
                  </button>
                  <button
                    type="button"
                    class="button button-primary body-small mr-2"
                    [class.active]="chartRange === chartRangeData.H_24"
                    (click)="updateBlockAndTxs(chartRangeData.H_24)">
                    24h
                  </button>
                  <button
                    type="button"
                    class="button button-primary body-small mr-2"
                    [class.active]="chartRange === chartRangeData.D_30"
                    (click)="updateBlockAndTxs(chartRangeData.D_30)">
                    30d
                  </button>
                  <button
                    type="button"
                    class="button button-primary body-small"
                    [class.active]="chartRange === chartRangeData.MONTH_12"
                    (click)="updateBlockAndTxs(chartRangeData.MONTH_12)">
                    12M
                  </button>
                </div>
              </div>
            </div>
            <div class="w-100" *ngIf="chartOptions">
              <div id="chart">
                <apx-chart
                  [series]="chartOptions.series"
                  [chart]="chartOptions.chart"
                  [xaxis]="chartOptions.xAxis"
                  [stroke]="chartOptions.stroke"
                  [tooltip]="chartOptions.tooltip"
                  [dataLabels]="chartOptions.dataLabels">
                </apx-chart>
              </div>
            </div>

            <div class="d-lg-none text-center">
              <button
                type="button"
                class="button button-primary body-small mr-6"
                [class.active]="chartRange === chartRangeData.M_60"
                (click)="updateBlockAndTxs(chartRangeData.M_60)">
                60m
              </button>
              <button
                type="button"
                class="button button-primary body-small mr-6"
                [class.active]="chartRange === chartRangeData.H_24"
                (click)="updateBlockAndTxs(chartRangeData.H_24)">
                24h
              </button>
              <button
                type="button"
                class="button button-primary body-small mr-6"
                [class.active]="chartRange === chartRangeData.D_30"
                (click)="updateBlockAndTxs(chartRangeData.D_30)">
                30d
              </button>
              <button
                type="button"
                class="button button-primary body-small"
                [class.active]="chartRange === chartRangeData.MONTH_12"
                (click)="updateBlockAndTxs(chartRangeData.MONTH_12)">
                12M
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Cards -->
<section>
  <div class="row">
    <div class="col-xl-3 col-md-6" *ngIf="global?.dataHeader?.block_height > 0">
      <!-- card -->
      <div class="card card-h-100 text--white card-highlight">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-2 mb-lg-9">
            <div class="col-12">
              <span class="sub-text sub-text-mob card-highlight__label">Height</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between flex-wrap">
            <h4 class="sub-text text-gradient card-highlight__content mb-0">
              {{ global?.dataHeader?.block_height || 0 | number }}
            </h4>
            <!-- <div class="body">Update 5s ago</div> -->
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div class="col-xl-3 col-md-6" *ngIf="global?.dataHeader?.total_txs_num >= 0">
      <!-- card -->
      <div class="card card-h-100 text--white card-highlight">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-2 mb-lg-9">
            <div class="col-12">
              <span class="sub-text sub-text-mob card-highlight__label">Transactions</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between flex-wrap">
            <h4 class="sub-text text-gradient card-highlight__content mb-0">
              {{ global?.dataHeader?.total_txs_num | number }}
            </h4>
            <!-- <div class="body">Update 5s ago</div> -->
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div class="col-xl-3 col-md-6" *ngIf="global?.dataHeader?.bonded_tokens">
      <!-- card -->
      <div class="card card-h-100 text--white card-highlight">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-2 mb-lg-9">
            <div class="col-12">
              <span class="sub-text sub-text-mob card-highlight__label">Bonded Tokens</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between flex-wrap">
            <h4 class="sub-text text-gradient card-highlight__content mb-0">
              {{ global?.dataHeader?.bonded_tokens || 0 }} / {{ global?.dataHeader?.supply || 0 }}
            </h4>
            <!-- <div class="body">Update 5s ago</div> -->
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div
      class="col-xl-3 col-md-6"
      *ngIf="global?.dataHeader?.total_validator_active_num >= 0 && global?.dataHeader?.total_validator_num >= 0">
      <!-- card -->
      <div class="card card-h-100 text--white card-highlight">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-2 mb-lg-9">
            <div class="col-12">
              <span class="sub-text sub-text-mob card-highlight__label">Validators</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between flex-wrap">
            <h4 class="sub-text text-gradient card-highlight__content mb-0">
              {{ global?.dataHeader?.total_validator_active_num || 0 }}
              {{ global?.dataHeader?.total_validator_num >= 0 ? '/ ' + global?.dataHeader?.total_validator_num : 0 }}
            </h4>
            <!-- <div class="body">Update 5s ago</div> -->
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
  </div>
</section>
<!-- Tables -->
<section>
  <div class="row">
    <!-- Block -->
    <div class="col-xl-6">
      <div class="card">
        <div class="align-items-center d-flex justify-content-between px-6 pt-4 pt-lg-6 pb-0 pb-lg-6">
          <div class="sub-text sub-text-mob text--white mb-2 mb-lg-0">Blocks</div>
          <button
            type="button"
            class="button button-outline button-outline__in-card d-none d-lg-block body"
            [routerLink]="'/blocks'"
            *ngIf="dataSourceBlock">
            <span class="text-gradient">View more</span>
          </button>
        </div>
        <div class="card-body pt-0 box-dashboard">
          <ngx-simplebar>
            <ng-container *ngIf="dataSourceBlock; else noValues">
              <div class="table-responsive d-none d-lg-block">
                <table mat-table [dataSource]="dataSourceBlock" class="aura-table body">
                  <ng-container *ngFor="let template of templatesBlock; index as i">
                    <ng-container [matColumnDef]="template.matColumnDef">
                      <th mat-header-cell *matHeaderCellDef>
                        <div [innerHTML]="template.headerCellDef | translate"></div>
                      </th>
                      <td mat-cell *matCellDef="let data">
                        <div>
                          <ng-container [ngSwitch]="template.matColumnDef">
                            <div *ngSwitchCase="'timestamp'">
                              {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                            </div>
                            <a
                              *ngSwitchCase="'proposer'"
                              class="text--green cursor-pointer"
                              [routerLink]="['/validators', data.operator_address]">
                              {{ data[template.matColumnDef] }}
                            </a>
                            <a
                              *ngSwitchCase="'height'"
                              class="text--green cursor-pointer"
                              [routerLink]="['/blocks', data.height]">
                              {{ data[template.matColumnDef] }}
                            </a>
                            <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                          </ng-container>
                        </div>
                      </td>
                    </ng-container>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsBlock"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsBlock"></tr>
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell g-no-data" colspan="9999">
                      {{ 'NO DATA' | translate }}
                    </td>
                  </tr>
                </table>
              </div>
              <div class="d-lg-none" *ngIf="dataBlock && dataBlock.length > 0">
                <app-card-mob-simple
                  *ngFor="let data of dataBlock"
                  [link]="'/blocks/' + data.height"
                  [title]="{
                    size: 'md',
                    label: data.height,
                    subLabelContent: commonService.getDateValue(data.timestamp)[0]
                  }"
                  [content]="[
                    { label: 'Txs', info: data.num_txs.toString() },
                    { label: 'Time', info: commonService.getDateValue(data.timestamp, false)[1] }
                  ]"></app-card-mob-simple>
              </div>
            </ng-container>
            <ng-template #noValues>
              <app-table-no-data></app-table-no-data>
            </ng-template>
          </ngx-simplebar>
          <button
            type="button"
            class="button button-outline button-outline__in-card body d-lg-none w-100 mt-2"
            [routerLink]="'/blocks'"
            *ngIf="dataSourceBlock">
            <span class="text-gradient">View more</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Transaction -->
    <div class="col-xl-6">
      <div class="card">
        <div class="align-items-center d-flex justify-content-between px-6 pt-4 pt-lg-6 pb-0 pb-lg-6">
          <div class="sub-text sub-text-mob text--white mb-2 mb-lg-0">Transactions</div>
          <button
            type="button"
            class="button button-outline button-outline__in-card body d-none d-lg-block"
            [routerLink]="'/transaction'"
            *ngIf="dataSourceTx">
            <span class="text-gradient">View more</span>
          </button>
        </div>
        <div class="card-body pt-0 box-dashboard">
          <ngx-simplebar>
            <ng-container *ngIf="dataSourceTx; else noValues">
              <div class="table-responsive d-none d-lg-block">
                <table mat-table [dataSource]="dataSourceTx" class="aura-table transaction body">
                  <ng-container *ngFor="let template of templatesTx; index as i">
                    <ng-container [matColumnDef]="template.matColumnDef">
                      <th
                        mat-header-cell
                        *matHeaderCellDef
                        [class.width-txhash]="template.headerCellDef === 'Tx Hash'"
                        [ngClass]="template.headerCellDef === 'Type' ? 'width-type' : ''">
                        <div [innerHTML]="template.headerCellDef | translate"></div>
                      </th>
                      <td mat-cell *matCellDef="let data">
                        <div>
                          <ng-container [ngSwitch]="template.matColumnDef">
                            <div *ngSwitchCase="'timestamp'">
                              {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                            </div>
                            <a
                              *ngSwitchCase="'tx_hash'"
                              class="text--green cursor-pointer hash-link"
                              [routerLink]="['/transaction', data['tx_hash']]">
                              {{ data[template.matColumnDef] | cutStringPipe: 8:8 }}
                            </a>
                            <a
                              *ngSwitchCase="'height'"
                              class="text--green cursor-pointer block-link"
                              [routerLink]="['/blocks/id', data['blockId']]">
                              {{ data[template.matColumnDef] }}
                            </a>
                            <div *ngSwitchCase="'type'">
                              <span class="label__status">{{ data[template.matColumnDef] }}</span>
                            </div>
                            <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                          </ng-container>
                        </div>
                      </td>
                    </ng-container>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsTx"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsTx"></tr>
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell g-no-data" colspan="9999">
                      {{ 'NO DATA' | translate }}
                    </td>
                  </tr>
                </table>
              </div>
              <div class="d-lg-none" *ngIf="dataTx && dataTx.length > 0">
                <app-card-mob-simple
                  *ngFor="let data of dataTx"
                  [link]="'/transaction/' + data.tx_hash"
                  [title]="{
                    size: 'md',
                    label: data.tx_hash | cutStringPipe: 6:6,
                    subLabelContent: data.type,
                    subLabelClass: 'label__status',
                    status: data.code
                  }"
                  [content]="[
                    { label: 'Amount', info: checkAmountValue(data.messages, data.tx_hash, data.typeOrigin) },
                    { label: 'Time', info: commonService.getDateValue(data.timestamp, false)[1] }
                  ]"></app-card-mob-simple>
              </div>
            </ng-container>
            <ng-template #noValues>
              <app-table-no-data></app-table-no-data>
            </ng-template>
          </ngx-simplebar>
          <button
            type="button"
            class="button button-outline button-outline__in-card body d-lg-none w-100 mt-2"
            [routerLink]="'/transaction'"
            *ngIf="dataSourceTx">
            <span class="text-gradient">View more</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
