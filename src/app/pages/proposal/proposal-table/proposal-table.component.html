<div class="proposal-table-container aura-table-contain" *ngIf="{ value: breakpoint$ | async } as breakpoint">
  <ng-container *ngIf="data.length > 0; else noValues">
    <ng-container *ngIf="!breakpoint.value.matches">
      <table mat-table [dataSource]="dataSource" class="table-responsive aura-table">
        <ng-container *ngFor="let template of template; index as i">
          <ng-container [matColumnDef]="template.matColumnDef">
            <th mat-header-cell *matHeaderCellDef>
              <div [innerHTML]="template.headerCellDef | translate"></div>
            </th>

            <td mat-cell *matCellDef="let data">
              <div [classList]="[template.cssClass]" ngClass="d-flex align-items-center">
                <span *ngIf="template.prefix" class="cursor-pointer">
                  <ng-container *ngIf="template.prefix === 'operator_address'">
                    <div class="avatar-wrapper">
                      <span
                        class="validator-avatar d-inline-flex"
                        [routerLink]="[template.isUrl, data['operator_address']]">
                        <app-loading-image [srcImg]="getValidatorAvatar(data.operator_address)"> </app-loading-image>
                      </span>
                    </div>
                  </ng-container>
                </span>
                <ng-container *ngIf="template.isUrl && !template.isShort && data[template.matColumnDef]">
                  <a [routerLink]="[template.isUrl, data[template.paramField] || data[template.matColumnDef]]">
                    {{
                      (template.isShort ? shortenAddress(data[template.matColumnDef]) : data[template.matColumnDef]) ||
                        '-'
                    }}
                  </a>
                </ng-container>
                <ng-container *ngIf="template.isUrl && template.isShort">
                  <a
                    [routerLink]="[template.isUrl, data[template.matColumnDef]]"
                    [class.disabled-link]="!data[template.matColumnDef]">
                    {{ shortenAddress(data[template.matColumnDef]) || '-' }}
                  </a>
                </ng-container>
                <ng-container *ngIf="!template.isUrl || data[template.matColumnDef] === ''">
                  <ng-container [ngSwitch]="template.matColumnDef">
                    <ng-container *ngSwitchCase="'amount'">
                      {{
                        (template.isShort
                          ? shortenAddress(data[template.matColumnDef])
                          : data[template.matColumnDef]) || '-' | number: global.formatNumberToken
                      }}
                      <span class="text--primary ml-1">{{ denom }}</span>
                    </ng-container>
                    <ng-container *ngSwitchCase="'option'">
                      {{ getVoteValue(data[template.matColumnDef]) }}
                    </ng-container>
                    <ng-container *ngSwitchCase="'rank'">
                      <span>{{ data[template.matColumnDef] }}</span>
                    </ng-container>
                    <ng-container *ngSwitchCase="'updated_at'">
                      {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                      <br />
                      {{ commonService.getDateValue(data[template.matColumnDef])[1] }}
                    </ng-container>
                    <ng-container *ngSwitchCase="'created_at'">
                      {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                      <br />
                      {{ commonService.getDateValue(data[template.matColumnDef])[1] }}
                    </ng-container>
                    <ng-container *ngSwitchCase="'timestamp'">
                      {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                      <br />
                      {{ commonService.getDateValue(data[template.matColumnDef])[1] }}
                    </ng-container>

                    <ng-container *ngSwitchDefault>
                      {{
                        (template.isShort
                          ? shortenAddress(data[template.matColumnDef])
                          : data[template.matColumnDef]) || '-'
                      }}
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div>
            </td>
          </ng-container>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell g-no-data" colspan="9999">
            {{ 'NO DATA' | translate }}
          </td>
        </tr>
      </table>
    </ng-container>
    <ng-container *ngIf="breakpoint.value.matches">
      <div class="table-mobile">
        <ng-container *ngFor="let data of getListData(); index as i">
          <ng-container *ngIf="type === 'VOTES'">
            <div class="box-mob-table fw-normal mb-3">
              <div class="table-header mb-2">
                <div class="d-flex justify-content-between">
                  <div>
                    <a class="text--green body" [routerLink]="['/account', data['voter'] || data['voter']]">
                      {{ shortenAddress(data['voter']) || '-' }}
                    </a>
                  </div>
                  <div class="text--white body">
                    {{ getVoteValue(data['option']) }}
                  </div>
                </div>
              </div>
              <div class="table-body">
                <ng-container *ngFor="let template of template; index as idx">
                  <div
                    class="table-body__item d-flex justify-content-between text--white mb-2"
                    *ngIf="template?.desktopOnly">
                    <span>{{ template['headerCellDef'] }}</span>
                    <ng-container *ngIf="template.matColumnDef === 'updated_at'">
                      {{ commonService.getDateValue(data[template.matColumnDef], false)[1] }}
                    </ng-container>
                    <ng-container *ngIf="template.matColumnDef === 'tx_hash'">
                      <a
                        class="text--green small-body"
                        [routerLink]="[template.isUrl, data[template.paramField] || data[template.matColumnDef]]">
                        {{
                          (template.isShort
                            ? shortenAddress(data[template.matColumnDef])
                            : data[template.matColumnDef]) || '-'
                        }}
                      </a>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="type === 'VALIDATORS_VOTES'">
            <div class="table-mobile__item fw-normal mb-3">
              <div class="table-header">
                <div class="d-flex justify-content-between">
                  <div class="d-flex">
                    <div class="">
                      <a
                        class="text--green body fw-semibold"
                        [routerLink]="['/validators', data['operator_address'] || data['validator_name']]">
                        <!-- <span class="text--white mr-1">{{ data['rank'] }}</span>  -->
                        <div class="g-flex-start-center">
                          <div class="avatar-wrapper">
                            <span class="validator-avatar">
                              <app-loading-image [srcImg]="getValidatorAvatar(data['operator_address'])">
                              </app-loading-image>
                            </span>
                            <div class="rank-wrapper _small">
                              <div class="box-rank _small _fill">
                                <span> {{ data['rank'] }} </span>
                              </div>
                            </div>
                          </div>
                          {{ data['validator_name'] || '-' }}
                        </div>
                      </a>
                    </div>
                  </div>
                  <div class="text--white body">
                    {{ getVoteValue(data['option']) }}
                  </div>
                </div>
              </div>
              <div class="table-body">
                <ng-container *ngFor="let template of template; index as idx">
                  <div
                    class="table-body__item d-flex justify-content-between text--white mb-2"
                    *ngIf="template?.desktopOnly">
                    <span>{{ template['headerCellDef'] }}</span>
                    <ng-container *ngIf="template.matColumnDef === 'updated_at'">
                      {{ commonService.getDateValue(data[template.matColumnDef], false)[1] || '-' }}
                    </ng-container>
                    <ng-container *ngIf="template.matColumnDef === 'tx_hash'">
                      <a
                        class="item-link small-body"
                        [class.disabled-link]="!data[template.matColumnDef]"
                        [routerLink]="[template.isUrl, data[template.paramField] || data[template.matColumnDef]]">
                        {{
                          (template.isShort
                            ? shortenAddress(data[template.matColumnDef])
                            : data[template.matColumnDef]) || '-'
                        }}
                      </a>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="type === 'DEPOSITORS'">
            <div class="box-mob-table fw-normal mb-3">
              <div class="table-header mb-2">
                <div class="d-flex justify-content-between">
                  <a
                    class="text--green body fw-500"
                    [routerLink]="['/account', data['depositor'] || data['depositor']]">
                    {{ shortenAddress(data['depositor']) }}
                  </a>
                </div>
              </div>
              <div class="table-body">
                <ng-container *ngFor="let template of template; index as idx">
                  <div
                    class="table-body__item d-flex justify-content-between text--white mb-2"
                    *ngIf="!template?.desktopOnly">
                    <span>{{ template['headerCellDef'] }}</span>
                    <ng-container *ngIf="template.matColumnDef === 'timestamp'">
                      {{ commonService.getDateValue(data[template.matColumnDef], false)[1] }}
                    </ng-container>
                    <ng-container *ngIf="template.matColumnDef === 'tx_hash'">
                      <a
                        class="text--green small-body"
                        [class.disabled-link]="!data[template.matColumnDef]"
                        [routerLink]="[template.isUrl, data[template.paramField] || data[template.matColumnDef]]">
                        {{
                          (template.isShort
                            ? shortenAddress(data[template.matColumnDef])
                            : data[template.matColumnDef]) || '-'
                        }}
                      </a>
                    </ng-container>
                    <ng-container *ngIf="template.matColumnDef === 'amount'">
                      <div class="d-flex justify-content-around">
                        {{
                          (template.isShort
                            ? shortenAddress(data[template.matColumnDef])
                            : data[template.matColumnDef]) || '-' | number: global.formatNumberToken
                        }}
                        <span class="text--primary ml-1">{{ denom }}</span>
                      </div>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell g-no-data" colspan="9999">
              {{ 'NO DATA' | translate }}
            </td>
          </tr>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
  <!-- <mat-paginator class="d-none" #paginator [length]="length" [pageSize]="pageSize" >
  </mat-paginator>
  <mat-paginator [class.d-none]="length === 0" #paginator2 [length]="length" [pageSize]="pageSize"
    (page)="pageEvent($event)">
  </mat-paginator> -->
  <app-paginator
    [length]="length"
    [pageSize]="pageSize"
    (paginator)="paginatorEmit($event)"
    (pageEvent)="pageEvent($event)"></app-paginator>
  <ng-template #noValues>
    <app-table-no-data></app-table-no-data>
  </ng-template>
</div>
