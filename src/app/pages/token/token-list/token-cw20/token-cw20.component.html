<h1 class="mb-0 text--white">Coins & Tokens</h1>
<div class="d-flex justify-content-between mt-6">
  <div class="filter-group d-flex align-items-center flex-nowrap">
    <button
      class="button button-pill button-flat body-02 caption-mob"
      [class.active]="filterType.length === 0"
      (click)="filterToken()">
      All types
    </button>
    <button
      class="button button-pill button-flat body-02 caption-mob"
      [class.active]="filterType.includes(ETokenCoinType.NATIVE)"
      (click)="filterToken(ETokenCoinType.NATIVE)">
      Staking Coin
    </button>
    <button
      class="button button-pill button-flat body-02 caption-mob"
      [class.active]="filterType.includes(ETokenCoinType.IBC)"
      (click)="filterToken(ETokenCoinType.IBC)">
      IBC Coin
    </button>
    <button
      class="button button-pill button-flat body-02 caption-mob"
      [class.active]="filterType.includes(ETokenCoinType.CW20)"
      (click)="filterToken(ETokenCoinType.CW20)">
      CW-20 Token
    </button>
  </div>
  <form class="aura-form single-input-field search-form" #searchForm *ngIf="!isMobileMatched">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        placeholder="Search by Coin/Token name, symbol, IBC denom, HashContract address"
        [(ngModel)]="textSearch"
        [maxLength]="maxLengthSearch"
        (keyup)="onKeyUp()"
        name="search"
        autocomplete="off" />
      <button
        type="submit"
        class="btn-search {{ textSearch && textSearch?.length > 0 ? 'd-none' : '' }}"
        (click)="getListToken()">
        <img [src]="'assets/icons/icons-svg/basic/search.svg' | imageS3" alt="" width="24" height="24" />
      </button>
      <button
        type="reset"
        class="btn-reset cursor-pointer {{ !textSearch || (textSearch && textSearch?.length === 0) ? 'd-none' : '' }}"
        (click)="resetSearch()">
        <img [src]="'assets/icons/icons-svg/basic/close-circle.svg' | imageS3" alt="" width="24" height="24" />
      </button>
    </div>
  </form>
</div>
<ng-container>
  <div class="card mt-4 mt-lg-5">
    <div class="card-body">
      <!-- search form mobile -->
      <form
        class="aura-form single-input-field search-form mb-3"
        #searchFormMob
        *ngIf="isMobileMatched && searchExplain">
        <div class="input-group px-2">
          <input
            type="text"
            class="form-control"
            placeholder="Search by Coin/Token name, symbol, IBC denom, HashContract address"
            [(ngModel)]="textSearch"
            [maxLength]="maxLengthSearch"
            (keyup)="onKeyUp()"
            name="search"
            autocomplete="off" />
          <button
            type="reset"
            class="btn-reset cursor-pointer {{
              !textSearch || (textSearch && textSearch?.length === 0) ? 'd-none' : ''
            }}"
            (click)="resetSearch()">
            <img [src]="'assets/icons/icons-svg/basic/close-circle.svg' | imageS3" alt="" width="24" height="24" />
          </button>
        </div>
      </form>
      <!-- Title -->
      <div class="d-flex justify-content-between align-items-center" *ngIf="!errTxt && !isLoadingTable">
        <div class="caption-mob fw-normal-mob body-03 text--gray-5">
          A total of {{ pageData?.length | number }} Contract{{ pageData?.length > 1 ? 's' : '' }} found
        </div>
        <img
          [src]="'assets/icons/icons-svg/white/search.svg' | imageS3"
          alt=""
          width="24"
          height="24"
          (click)="searchExplain = !searchExplain" />
      </div>
      <!-- Table -->
      <app-loading-sprint *ngIf="isLoadingTable"></app-loading-sprint>
      <div class="table-responsive table-token mt-4" *ngIf="!isMobileMatched">
        <table
          mat-table
          matSort
          [dataSource]="dataSource"
          class="aura-table"
          *ngIf="pageData?.length > 0 && !isLoadingTable; else noValues">
          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef class="text-capitalize">No</th>
            <td mat-cell *matCellDef="let element; let i = index" class="vertical-align-top py-4">
              <span>{{ pageData?.pageIndex * 20 + i + 1 }}</span>
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="token">
            <th mat-header-cell *matHeaderCellDef class="col-per-30 text-capitalize">Name</th>
            <td mat-cell *matCellDef="let element" class="title-cell py-4 vertical-align-top">
              <div class="d-flex align-items-center token-item">
                <img class="rounded-circle" [src]="element.image || defaultLogoToken" width="18" height="18" />
                <div class="ml-3 d-flex align-items-center">
                  <a
                    [routerLink]="['/tokens/token', element.contract_address || element.denom?.replace('ibc/', '')]"
                    class="text--primary">
                    {{ element.name | ellipsis: 25 }}
                    <span *ngIf="element.symbol"> ({{ element.symbol | ellipsis: 15 }}) </span>
                  </a>
                  <div class="status cursor-pointer aura-tooltip-contain">
                    <img
                      [src]="'assets/images/icons/circle-wavy-check.png' | imageS3"
                      alt=""
                      width="18"
                      height="18"
                      class="ml-1 mb-1 aura-tooltip-object"
                      *ngIf="element.verify_status === 'VERIFIED'" />
                    <app-tooltip-customize [content]="element.verify_text || 'Verified by Aura Network'">
                    </app-tooltip-customize>
                  </div>
                </div>
              </div>
            </td>
          </ng-container>

          <!-- Type Column -->
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef class="col-per-13 text-capitalize">Type</th>
            <td mat-cell *matCellDef="let element" class="title-cell py-4 vertical-align-top">
              {{ element.type || ETokenCoinType.CW20 }}
            </td>
          </ng-container>

          <!-- Price Column -->
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef class="text-capitalize">Price</th>
            <td mat-cell *matCellDef="let element" class="vertical-align-top py-4">
              <ng-container *ngIf="element.price; else noData">
                <div class="mb-1 text--gray-1">${{ element.price | mask: 'separator.6' }}</div>
              </ng-container>
            </td>
          </ng-container>

          <!-- Total Supply Column -->
          <ng-container matColumnDef="totalSupply">
            <th mat-header-cell *matHeaderCellDef>In-Chain Supply Amount</th>
            <td mat-cell *matCellDef="let element" class="vertical-align-top py-4">
              <ng-container *ngIf="element.totalSupply >= 0; else noData">
                {{ element.totalSupply | mask: 'separator.2' }}
              </ng-container>
            </td>
          </ng-container>

          <!-- On-Chain Market Cap Column -->
          <ng-container matColumnDef="inChainValue">
            <th mat-header-cell *matHeaderCellDef>In-Chain Supply</th>
            <td mat-cell *matCellDef="let element" class="vertical-align-top py-4">
              <ng-container *ngIf="element.inChainValue >= 0; else noData">
                ${{ element.inChainValue | formatDigit: 2 }}
              </ng-container>
            </td>
          </ng-container>

          <!-- Holder Column -->
          <ng-container matColumnDef="holder">
            <th mat-header-cell *matHeaderCellDef class="col-per-15 text-capitalize">Holder</th>
            <td mat-cell *matCellDef="let element" class="title-cell py-4 vertical-align-top">
              {{ element.holders || 0 | formatDigit }}<br />
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell g-no-data" colspan="9999">
              {{ 'NO DATA' | translate }}
            </td>
          </tr>
        </table>
        <div class="d-flex justify-content-center justify-content-md-end mb-lg-0 mb-4">
          <app-paginator
            [length]="pageData.length"
            [pageSize]="pageData.pageSize"
            (paginator)="paginatorEmit($event)"
            (pageEvent)="pageEvent($event)">
          </app-paginator>
        </div>
      </div>
      <ng-container *ngIf="isMobileMatched">
        <div class="mt-4" *ngIf="pageData?.length > 0 && !isLoadingTable; else noValues">
          <div class="token-card border-radius--sm py-3 px-3 mb-2" *ngFor="let data of dataSource.data">
            <div class="d-flex justify-content-between">
              <div class="d-flex align-items-center flex-shrink-0">
                <img class="rounded-circle" [src]="data.image || defaultLogoToken" width="18" height="18" />
                <div class="ml-3 d-flex align-items-center">
                  <a
                    [routerLink]="['/tokens/token', data.contract_address || data.denom?.replace('ibc/', '')]"
                    class="text--primary">
                    {{ data.name | ellipsis: 10 }}
                    <span *ngIf="data.symbol"> ({{ data.symbol | ellipsis: 6 }}) </span>
                  </a>
                  <div class="status cursor-pointer aura-tooltip-contain">
                    <img
                      [src]="'assets/images/icons/circle-wavy-check.png' | imageS3"
                      alt=""
                      width="18"
                      height="18"
                      class="ml-1 mb-1 aura-tooltip-object"
                      *ngIf="data.verify_status === 'VERIFIED'" />
                    <app-tooltip-customize [content]="data.verify_text || 'Verified by Aura Network'">
                    </app-tooltip-customize>
                  </div>
                </div>
              </div>
              <div class="text--white flex-shrink-0">{{ data.type || ETokenCoinType.CW20 }}</div>
            </div>
            <div class="divider divider-horizontal my-3"></div>
            <div class="d-flex justify-content-between">
              <div class="text--gray-4">Price</div>
              <ng-container *ngIf="data.price; else noData">
                <div class="text--white">${{ data.price | mask: 'separator.6' }}</div>
              </ng-container>
            </div>
            <div class="d-flex justify-content-between mt-3">
              <div class="text--gray-4">Total Supply</div>
              <ng-container *ngIf="data.totalSupply >= 0; else noData">
                <div class="text--white">{{ data.totalSupply | mask: 'separator.2' }}</div>
              </ng-container>
            </div>
            <div class="d-flex justify-content-between mt-3">
              <div class="text--gray-4">In-Chain Supply</div>
              <ng-container *ngIf="data.inChainValue >= 0; else noData">
                <div class="text--white">${{ data.inChainValue | formatDigit: 2 }}</div>
              </ng-container>
            </div>
          </div>
        </div>
      </ng-container>
      <!-- No data -->
      <ng-template #noValues>
        <app-table-no-data [textNull]="errTxt" *ngIf="!isLoadingTable"></app-table-no-data>
      </ng-template>
    </div>
  </div>
</ng-container>
<ng-template #noData> -</ng-template>
